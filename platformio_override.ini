# Example PlatformIO Project Configuration Override
# ------------------------------------------------------------------------------
# Copy to platformio_override.ini to activate overrides
# ------------------------------------------------------------------------------
# Please visit documentation: https://docs.platformio.org/page/projectconf.html

[platformio]
default_envs = ESP32-S3_8MB_PSRAM, ESP32-LOLIN_S3_Mini, ESP32-LOLIN_S2_Mini

[env:ESP32-LOLIN_S2_Mini]
board = lolin_s2_mini
board_build.partitions = tools/WLED_ESP32_4MB_256KB_FS.csv   ;; 1.8MB firmware, 256KB filesystem (esptool erase_flash needed when changing from "standard WLED" partitions)
board_build.arduino.memory_type = qio_qspi ;; use with PSRAM: 2MB or 4MB
board_build.flash_mode = qio ;; use dio if board is unstable (I think these pins are available)
platform = ${esp32s2.platform}
platform_packages = ${esp32s2.platform_packages}
lib_deps = ${esp32s2.lib_deps}
   '"https://github.com/kosme/arduinoFFT#develop @ 1.9.2"'
   U8g2 @ ~2.33.15
   Wire

build_unflags = ${common.build_unflags} #-DARDUINO_USB_CDC_ON_BOOT=1
build_flags = ${common.build_flags} ${esp32s2.build_flags} -Wno-misleading-indentation -Wno-format-truncation
  -D WLED_RELEASE_NAME=ESP32_S2_Rotary
  -DARDUINO_USB_CDC_ON_BOOT=0
  -DARDUINO_USB_MSC_ON_BOOT=0
  -DARDUINO_USB_DFU_ON_BOOT=0
  -DBOARD_HAS_PSRAM
  -D WLED_USE_PSRAM

  -D LEDPIN=16
  -D RLYPIN=15
  -D RLYMODE=0
  -D BTNPIN=-1
  -D IRPIN=-1

  -D HW_PIN_SCL=40
  -D HW_PIN_MOSISPI=35
  -D HW_PIN_MISOSPI=37
  -D DEFAULT_LED_COUNT=162
  -D DEFAULT_LED_TYPE=TYPE_SK6812_RGBW

  -D SR_DMTYPE=3
  -D I2S_SDPIN=9
  -D I2S_WSPIN=8
  -D I2S_CKPIN=17
  -D AURDIOPIN=-18

  -D WLED_USE_MY_CONFIG

  -D MDNS_NAME='"s2"' ;; as in s2.local
  -D SERVERNAME='"s2"' ;; used in fully resolved domain name
  -D WLED_AP_SSID='"S2"'
  -D WLED_AP_PASS='"8letters"'
  -D CLIENT_SSID='"gravitas"'
  -D CLIENT_PASS='"8letters"'

  -D USERMOD_BATTERY
  -D USERMOD_BATTERY_USE_LIPO
  -D USERMOD_BATTERY_MEASUREMENT_PIN
  -D USERMOD_BATTERY_MIN_VOLTAGE=3.2
  -D USERMOD_BATTTERY_VOLTAGE_MULTIPLIER=2
  -D USERMOD_BATTERY_AUTO_OFF_ENABLED=false
  -D USERMOD_BATTERY_AUTO_OFF_THRESHOLD=10
  -D USERMOD_BATTERY_LOW_POWER_INDICATOR_ENABLED=false
  -D USERMOD_BATTERY_LOW_POWER_INDICATOR_PRESET=244
  -D USERMOD_BATTERY_LOW_POWER_INDICATOR_THRESHOLD=20
  -D USERMOD_BATTERY_TOTAL_CAPACITY=4200

  -D USERMOD_SN_PHOTORESISTOR ; - define this to have this user mod included wled00\usermods_list.cpp
  -D PHOTORESISTOR_PIN=4
  -D USERMOD_SN_PHOTORESISTOR_MEASUREMENT_INTERVAL=60000 ; // - the number of milliseconds between measurements, defaults to 60 seconds
  -D USERMOD_SN_PHOTORESISTOR_FIRST_MEASUREMENT_AT=20000 ; // - the number of milliseconds after boot to take first measurement, defaults to 20 seconds
  -D USERMOD_SN_PHOTORESISTOR_REFERENCE_VOLTAGE=3.3 ;      //- the voltage supplied to the sensor, defaults to 5v
  -D USERMOD_SN_PHOTORESISTOR_ADC_PRECISION=1024 ;         //- the ADC precision is the number of distinguishable ADC inputs, defaults to 1024.0 (10 bits)
  -D USERMOD_SN_PHOTORESISTOR_RESISTOR_VALUE=8200 ;        // - the resistor size, defaults to 10000.0 (10K hms)
  -D USERMOD_SN_PHOTORESISTOR_OFFSET_VALUE=25 ;            // - the offset value to report on, defaults to 25

  -D USERMOD_ROTARY_ENCODER_UI
  -D USERMOD_ROTARY_ENCODER_GPIO='INPUT'
  -D ENCODER_DT_PIN=12 ; // defaults to 12
  -D ENCODER_CLK_PIN=14 ; // defaults to 14
  -D ENCODER_SW_PIN=13 ; // defaults to 13


[env:ESP32-LOLIN_S3_Mini]
board = lolin_s3_mini
board_build.partitions = tools/WLED_ESP32_4MB_256KB_FS.csv   ;; 1.8MB firmware, 256KB filesystem (esptool erase_flash needed when changing from "standard WLED" partitions)
board_build.arduino.memory_type = qio_qspi ;; use with PSRAM: 2MB or 4MB
board_build.flash_mode = qio ;; use dio if board is unstable (I think these pins are available)
platform = ${esp32s3.platform}
platform_packages = ${esp32s3.platform_packages}
upload_speed = 256000 ;; 921600
build_unflags = ${common.build_unflags}
lib_deps = ${esp32s3.lib_deps}
   '"https://github.com/kosme/arduinoFFT#develop @ 1.9.2"'
   U8g2 @ ~2.33.15
   Wire

build_flags = ${common.build_flags} ${esp32s3.build_flags}  -Wno-misleading-indentation -Wno-format-truncation
  -D WLED_USE_MY_CONFIG
  -DBOARD_HAS_PSRAM
  -D WLED_USE_PSRAM

  -DARDUINO_USB_CDC_ON_BOOT=0
  -DARDUINO_USB_MSC_ON_BOOT=0
  -DARDUINO_USB_DFU_ON_BOOT=0
  -D WLED_WATCHDOG_TIMEOUT=0 -D CONFIG_ASYNC_TCP_USE_WDT=0
  -D WLED_RELEASE_NAME=Lolin_S3_Mini_4LINE

  -D STATUSLED=47
  -D LEDPIN=16
  -D RLYPIN=15
  -D RLYMDE=0
  -D BTNPIN=0 -D IRPIN=-1

  -D USERMOD_FOUR_LINE_DISPLAY
  -D USE_ALT_DISPLAY
  -D HW_PIN_SCL=3
  -D FLD_PIN_SCL=3
  -D HW_PIN_SDA=2
  -D FLD_PIN_SDA=2
  -D HW_PIN_MOSISPI=4
  -D HW_PIN_CLOCKSPI=5
  -D HW_PIN_MISOSPI=6

  -D USERMOD_ROTARY_ENCODER_UI
  -D ENCODER_DT_PIN=10
  -D ENCODER_CLK_PIN=14
  -D ENCODER_SW_PIN=9
  -D USERMOD_ROTARY_ENCODER_GPIO='INPUT'


  -D DEFAULT_LED_COUNT=80
  -D DEFAULT_LED_TYPE=TYPE_SK6812_RGBW

  -D SR_DMTYPE=3
  -D I2S_SDPIN=13
  -D I2S_WSPIN=7
  -D I2S_CKPIN=17
  -D AUDIOPIN=-18

  -D USERMOD_BATTERY
  -D USERMOD_BATTERY_USE_LIPO
  -D USERMOD_BATTERY_MEASUREMENT_PIN
  -D USERMOD_BATTERY_MIN_VOLTAGE=3.2
  -D USERMOD_BATTTERY_VOLTAGE_MULTIPLIER=2
  -D USERMOD_BATTERY_AUTO_OFF_ENABLED=false
  -D USERMOD_BATTERY_AUTO_OFF_THRESHOLD=10
  -D USERMOD_BATTERY_LOW_POWER_INDICATOR_ENABLED=false
  -D USERMOD_BATTERY_LOW_POWER_INDICATOR_PRESET=244
  -D USERMOD_BATTERY_LOW_POWER_INDICATOR_THRESHOLD=20
  -D USERMOD_BATTERY_TOTAL_CAPACITY=5000

  -D USERMOD_AUTO_SAVE
  -D AUTOSAVE_PRESET_NUM=222
  -D AUTOSAVE_AFTER_SEC=15
  -D USERMOD_AUTO_SAVE_ON_BOOT=true

  -D MDNS_NAME='"beta"' ;; as in alpha.local
  -D SERVERNAME='"Beta"' ;; used in fully resolved domain name
  -D WLED_AP_SSID='"Beta"'
  -D WLED_AP_PASS='"8letters"'
  -D CLIENT_SSID='"gravitas"'
  -D CLIENT_PASS='"8letters"'

   -D DATA_PINS=16,21,11,47 ;; fix
   -D PIXEL_COUNTS=206,28,1,1 ;; fix

  -D USERMOD_SN_PHOTORESISTOR
  -D PHOTORESISTOR_PIN=5
  -D USERMOD_SN_PHOTORESISTOR_MEASUREMENT_INTERVAL=60000 ; // - the number of milliseconds between measurements, defaults to 60 seconds
  -D USERMOD_SN_PHOTORESISTOR_FIRST_MEASUREMENT_AT=20000 ; // - the number of milliseconds after boot to take first measurement, defaults to 20 seconds
  -D USERMOD_SN_PHOTORESISTOR_REFERENCE_VOLTAGE=3.3 ;      //- the voltage supplied to the sensor, defaults to 5v
  -D USERMOD_SN_PHOTORESISTOR_ADC_PRECISION=1024 ;         //- the ADC precision is the number of distinguishable ADC inputs, defaults to 1024.0 (10 bits)
  -D USERMOD_SN_PHOTORESISTOR_RESISTOR_VALUE=8200 ;        // - the resistor size, defaults to 10000.0 (10K hms)
  -D USERMOD_SN_PHOTORESISTOR_OFFSET_VALUE=25 ;            // - the offset value to report on, defaults to 25





[env:ESP32-S3_8MB_PSRAM]
;; ESP32-S3 development board, with 8MB FLASH and >= 8MB PSRAM (memory_type: qio_opi)
board = esp32-s3-devkitc-1 ;; generic dev board; the next line adds PSRAM support
board_build.arduino_memory_type = qio_opi ;; use with PSRAM: 8MB or 16MB
board_build.flash_mode = qio
platform = ${esp32s3.platform}
platform_packages = ${esp32s3.platform_packages}
upload_speed = 921600
build_unflags = ${common.build_unflags}
build_flags = ${common.build_flags} ${esp32s3.build_flags} -Wno-misleading-indentation -Wno-format-truncation
  -D WLED_USE_MY_CONFIG
  -D CONFIG_LITTLEFS_FOR_IDF_3_2 -D WLED_WATCHDOG_TIMEOUT=0
  -D WLED_MAX_USERMODS=25
  -DARDUINO_USB_MODE=1 -DARDUINO_USB_CDC_ON_BOOT=0 -DARDUINO_USB_MSC_ON_BOOT=0 -DARDUINO_USB_DFU_ON_BOOT=0     ;; for Serial-to-USB chip ;; Necessary because I broke the dedicated connector
  ;;-DARDUINO_USB_MODE=1 -DARDUINO_USB_CDC_ON_BOOT=1 -DARDUINO_USB_MSC_ON_BOOT=0 -DARDUINO_USB_DFU_ON_BOOT=1   ;; for Hardware-CDC USB mode;; Note: This doesn't boot unless USB is connected. Unsuitable for production.
  -D WLED_RELEASE_NAME=ESP32-S3_8MB_PSRAM
  -DBOARD_HAS_PSRAM ; tells WLED that PSRAM shall be used
  -D WLED_USE_PSRAM

  -D USERMOD_BATTERY
  -D USERMOD_BATTERY_USE_LIPO
  -D USERMOD_BATTERY_MEASUREMENT_PIN
  -D USERMOD_BATTERY_MIN_VOLTAGE=3.2
  -D USERMOD_BATTTERY_VOLTAGE_MULTIPLIER=2
  -D USERMOD_BATTERY_AUTO_OFF_ENABLED=false
  -D USERMOD_BATTERY_AUTO_OFF_THRESHOLD=10
  -D USERMOD_BATTERY_LOW_POWER_INDICATOR_ENABLED=false
  -D USERMOD_BATTERY_LOW_POWER_INDICATOR_PRESET=244
  -D USERMOD_BATTERY_LOW_POWER_INDICATOR_THRESHOLD=20
  -D USERMOD_BATTERY_TOTAL_CAPACITY=5000

  -D USERMOD_AUTO_SAVE
  -D AUTOSAVE_PRESET_NUM=222
  -D AUTOSAVE_AFTER_SEC=15
  -D USERMOD_AUTO_SAVE_ON_BOOT=true

  -D USERMOD_BATTERY_TOTAL_CAPACITY=5000
  -D LEDPIN=48
  -D STATUSLED=2
  -D RLYPIN=21
  -D RLYMODE=0
  -D DEFAULT_LED_COUNT=80
  -D DEFAULT_LED_TYPE=TYPE_SK6812_RGBW
  -D DATA_PINS=48,38,17,18
  -D PIXEL_COUNTS=1,1,80,1
  -D WLED_MAX_BUTTONS=8
  -D BTNPIN=0
  -D ABL_MILLIAMPS_DEFAULT=500

  -D MDNS_NAME='"alpha"' ;; as in alpha.local
  -D SERVERNAME='"Alpha"' ;; used in fully resolved domain name
  -D WLED_AP_SSID='"Alpha"'
  -D WLED_AP_PASS='"8letters"'
  -D CLIENT_SSID='"gravitas"'
  -D CLIENT_PASS='"8letters"'

  -D USERMOD_AUDIOREACTIVE
  -D UM_AUDIOREACTIVE_USE_NEW_FFT
  -D SR_DMTYPE=3
  -D I2S_SDPIN=16
  -D I2S_WSPIN=15
  -D I2S_CKPIN=14
  -D UM_AUDIOREACTIVE_ENABLE

lib_deps = ${esp32s3.lib_deps}
   '"https://github.com/kosme/arduinoFFT#develop @ 1.9.2"'
board_build.partitions = tools/WLED_ESP32_8MB_XL.csv
board_build.f_flash = 80000000L
monitor_filters = esp32_exception_decoder

;
;
; *** To use the below defines/overrides, copy and paste each onto it's own line just below build_flags in the section above.
; 
; disable specific features
;  -D WLED_DISABLE_OTA
;  -D WLED_DISABLE_ALEXA
;  -D WLED_DISABLE_HUESYNC
;  -D WLED_DISABLE_INFRARED
;  -D WLED_DISABLE_WEBSOCKETS
; PIN defines - uncomment and change, if needed:
;   -D LEDPIN=2
;   -D BTNPIN=0
;   -D TOUCHPIN=T0
;   -D IRPIN=4
;   -D RLYPIN=12
;   -D RLYMDE=1
; digital LED strip types - uncomment only one ! - this will disable WS281x / SK681x support
;   -D USE_APA102
;   -D USE_WS2801
;   -D USE_LPD8806
; PIN defines for 2 wire LEDs
   -D CLKPIN=0
   -D DATAPIN=2
; to drive analog LED strips (aka 5050) hardware configuration is no longer necessary
; configure the settings in the UI as follows (hard):
;   for the Magic Home LED Controller use PWM pins 5,12,13,15
;   for the H801 controller use PINs 15,13,12,14 (W2 = 04)
;   for the BW-LT11 controller use PINs 12,4,14,5
;   
; set the name of the module - make sure there is a quote-backslash-quote before the name and a backslash-quote-quote after the name
;   -D SERVERNAME="\"WLED\""
;   
; set the number of LEDs
;   -D DEFAULT_LED_COUNT=30
;   
; set milliampere limit when using ESP pin to power leds
;   -D ABL_MILLIAMPS_DEFAULT=850
;
; enable IR by setting remote type
;   -D IRTYPE=0 ;0 Remote disabled | 1 24-key RGB | 2 24-key with CT | 3 40-key blue | 4 40-key RGB | 5 21-key RGB | 6 6-key black | 7 9-key red | 8 JSON remote
;   
; set default color order of your led strip
;   -D DEFAULT_LED_COLOR_ORDER=COL_ORDER_GRB
